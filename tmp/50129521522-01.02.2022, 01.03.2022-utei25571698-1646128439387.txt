=====================================================================
01.03.2022 12:53:59
Task #25571684
Task contextru.ubs.ssbs.billing.BillingTaskContext@770dad72[
springServiceName=billingTaskService,
springServiceMethodName=calculateSingleContract,
taskManager=ru.ubs.ssbs.billing.BillingTaskServiceImpl$BillingTaskManager,
threadCount=1,
taskState=WORK,
message=Расчет домовых услуг,
exchangeFormatId=2544029,
userTaskId=25571684,
rangeCount=1,
rangeStart=0,
organisationDatasourceSchema=ssbs-40211,
inputParameters=ru.ubs.ssbs.domain.ContractCriteria@633ac7e0,
goodCount=1,
skipCount=0,
failedCount=0]
=====================================================================
Failed to calculate ODN resource

ru.ubs.ssbs.billing.rule.RuleException: Failed to calculate ODN resource
	at ru.ubs.ssbs.billing.rule.RuleCalcODNQuotaByHabitableLivabilityCodeRev3_HQLImpl.calculateODNResource(RuleCalcODNQuotaByHabitableLivabilityCodeRev3_HQLImpl.java:146)
	at ru.ubs.ssbs.billing.rule.RuleCalcODNQuotaByHabitableLivabilityCodeRev3_HQLImpl.calculate(RuleCalcODNQuotaByHabitableLivabilityCodeRev3_HQLImpl.java:63)
	at ru.ubs.ssbs.billing.BillingServiceHelper.calculateFacilityRule(BillingServiceHelper.java:257)
	at ru.ubs.ssbs.billing.BillingServiceHelper.calculateFacilityRule(BillingServiceHelper.java:366)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl.calculateContractItem(BillingTaskServiceImpl.java:1311)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl.calculateContractItem(BillingTaskServiceImpl.java:1291)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl.calculateTaskBillByBuilding(BillingTaskServiceImpl.java:965)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl.access$300(BillingTaskServiceImpl.java:50)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl$4.onObject(BillingTaskServiceImpl.java:914)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl$4.onObject(BillingTaskServiceImpl.java:906)
	at ru.ubs.ssbs.exchange.TaskThreadReader.read(TaskThreadReader.java:31)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl.handleCalculateTaskBillByBuilding(BillingTaskServiceImpl.java:933)
	at ru.ubs.ssbs.billing.BillingTaskServiceBase.calculateTaskBillByBuilding(BillingTaskServiceBase.java:652)
	at jdk.internal.reflect.GeneratedMethodAccessor1523.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:283)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)
	at com.sun.proxy.$Proxy225.calculateTaskBillByBuilding(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor3942.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at ru.ubs.utils.ObjectUtils.invokeMethod(ObjectUtils.java:384)
	at ru.ubs.ssbs.exchange.TaskServiceImpl.evaluateCurrentContextMethod(TaskServiceImpl.java:815)
	at ru.ubs.ssbs.exchange.TaskServiceImpl.executeBySingleThreadContext(TaskServiceImpl.java:850)
	at ru.ubs.ssbs.exchange.TaskServiceImpl.lambda$null$36(TaskServiceImpl.java:739)
	at ru.ubs.ssbs.utils.TransactionUtils.inTransaction(TransactionUtils.java:23)
	at ru.ubs.ssbs.exchange.TaskServiceImpl.lambda$null$39(TaskServiceImpl.java:737)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1764)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at java.base/java.lang.Thread.run(Thread.java:832)
Caused by: ru.ubs.ssbs.billing.rule.RuleException: Не указана  площадь домового имущества (Услуга: "Коммунальные услуги, Общедомовые нужды ХВС, Общедомовые нужды ХВС (В5)", период: 01.02.2022, 01.03.2022)
	at ru.ubs.ssbs.utils.ExceptionUtils.throwRuleException(ExceptionUtils.java:47)
	at ru.ubs.ssbs.billing.rule.RuleCalcODNQuotaByHabitableLivabilityCodeRev3_HQLImpl.handleCalculateODNResource(RuleCalcODNQuotaByHabitableLivabilityCodeRev3_HQLImpl.java:156)
	at ru.ubs.ssbs.billing.rule.RuleCalcODNQuotaByHabitableLivabilityCodeRev3_HQLImpl.calculateODNResource(RuleCalcODNQuotaByHabitableLivabilityCodeRev3_HQLImpl.java:142)
	... 37 more
Root cause:
ru.ubs.ssbs.billing.rule.RuleException: Не указана  площадь домового имущества (Услуга: "Коммунальные услуги, Общедомовые нужды ХВС, Общедомовые нужды ХВС (В5)", период: 01.02.2022, 01.03.2022)
	at ru.ubs.ssbs.utils.ExceptionUtils.throwRuleException(ExceptionUtils.java:47)
	at ru.ubs.ssbs.billing.rule.RuleCalcODNQuotaByHabitableLivabilityCodeRev3_HQLImpl.handleCalculateODNResource(RuleCalcODNQuotaByHabitableLivabilityCodeRev3_HQLImpl.java:156)
	at ru.ubs.ssbs.billing.rule.RuleCalcODNQuotaByHabitableLivabilityCodeRev3_HQLImpl.calculateODNResource(RuleCalcODNQuotaByHabitableLivabilityCodeRev3_HQLImpl.java:142)
	at ru.ubs.ssbs.billing.rule.RuleCalcODNQuotaByHabitableLivabilityCodeRev3_HQLImpl.calculate(RuleCalcODNQuotaByHabitableLivabilityCodeRev3_HQLImpl.java:63)
	at ru.ubs.ssbs.billing.BillingServiceHelper.calculateFacilityRule(BillingServiceHelper.java:257)
	at ru.ubs.ssbs.billing.BillingServiceHelper.calculateFacilityRule(BillingServiceHelper.java:366)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl.calculateContractItem(BillingTaskServiceImpl.java:1311)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl.calculateContractItem(BillingTaskServiceImpl.java:1291)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl.calculateTaskBillByBuilding(BillingTaskServiceImpl.java:965)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl.access$300(BillingTaskServiceImpl.java:50)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl$4.onObject(BillingTaskServiceImpl.java:914)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl$4.onObject(BillingTaskServiceImpl.java:906)
	at ru.ubs.ssbs.exchange.TaskThreadReader.read(TaskThreadReader.java:31)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl.handleCalculateTaskBillByBuilding(BillingTaskServiceImpl.java:933)
	at ru.ubs.ssbs.billing.BillingTaskServiceBase.calculateTaskBillByBuilding(BillingTaskServiceBase.java:652)
	at jdk.internal.reflect.GeneratedMethodAccessor1523.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:283)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)
	at com.sun.proxy.$Proxy225.calculateTaskBillByBuilding(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor3942.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at ru.ubs.utils.ObjectUtils.invokeMethod(ObjectUtils.java:384)
	at ru.ubs.ssbs.exchange.TaskServiceImpl.evaluateCurrentContextMethod(TaskServiceImpl.java:815)
	at ru.ubs.ssbs.exchange.TaskServiceImpl.executeBySingleThreadContext(TaskServiceImpl.java:850)
	at ru.ubs.ssbs.exchange.TaskServiceImpl.lambda$null$36(TaskServiceImpl.java:739)
	at ru.ubs.ssbs.utils.TransactionUtils.inTransaction(TransactionUtils.java:23)
	at ru.ubs.ssbs.exchange.TaskServiceImpl.lambda$null$39(TaskServiceImpl.java:737)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1764)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at java.base/java.lang.Thread.run(Thread.java:832)
