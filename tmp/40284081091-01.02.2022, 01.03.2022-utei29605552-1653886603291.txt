=====================================================================
30.05.2022 07:56:43
Task #29476891
Task contextru.ubs.ssbs.billing.BillingTaskContext@d790cc4[
springServiceName=billingTaskService,
springServiceMethodName=calculateContract,
taskManager=ru.ubs.ssbs.billing.BillingTaskServiceImpl$BillingTaskManager,
threadCount=4,
taskState=WORK,
message=Расчет прошлых периодов,
exchangeFormatId=170,
userTaskId=29476891,
rangeCount=3,
rangeStart=0,
organisationDatasourceSchema=ssbs-40211,
inputParameters=ru.ubs.ssbs.domain.ContractCriteria@1ea24e1,
goodCount=415,
skipCount=0,
failedCount=0]
=====================================================================
No row with the given identifier exists: [ru.ubs.ssbs.billing.ChargeEntrySerialisedImpl#29547124]

org.hibernate.ObjectNotFoundException: No row with the given identifier exists: [ru.ubs.ssbs.billing.ChargeEntrySerialisedImpl#29547124]
	at org.hibernate.internal.SessionFactoryImpl$1$1.handleEntityNotFound(SessionFactoryImpl.java:253)
	at org.hibernate.proxy.AbstractLazyInitializer.checkTargetState(AbstractLazyInitializer.java:262)
	at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:180)
	at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:286)
	at org.hibernate.engine.internal.StatefulPersistenceContext.unproxyAndReassociate(StatefulPersistenceContext.java:604)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:86)
	at org.hibernate.internal.SessionImpl.fireSaveOrUpdate(SessionImpl.java:684)
	at org.hibernate.internal.SessionImpl.saveOrUpdate(SessionImpl.java:676)
	at org.hibernate.engine.spi.CascadingActions$5.cascade(CascadingActions.java:235)
	at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:350)
	at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:293)
	at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:161)
	at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:118)
	at org.hibernate.event.internal.AbstractFlushingEventListener.cascadeOnFlush(AbstractFlushingEventListener.java:167)
	at org.hibernate.event.internal.AbstractFlushingEventListener.prepareEntityFlushes(AbstractFlushingEventListener.java:158)
	at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:91)
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:61)
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1227)
	at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1711)
	at org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:380)
	at org.hibernate.internal.CriteriaImpl.uniqueResult(CriteriaImpl.java:402)
	at ru.ubs.ssbs.billing.BillingServiceHelper.findLastContractBillingTaskReviseForThisPeriod(BillingServiceHelper.java:46)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl.calculateTaskRevise(BillingTaskServiceImpl.java:1187)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl$6.onObject(BillingTaskServiceImpl.java:1079)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl$6.onObject(BillingTaskServiceImpl.java:1071)
	at ru.ubs.ssbs.exchange.TaskThreadReader.read(TaskThreadReader.java:31)
	at ru.ubs.ssbs.billing.BillingTaskServiceImpl.handleCalculateTaskReviseUseBuildingMeasureUnitFacilities(BillingTaskServiceImpl.java:1097)
	at ru.ubs.ssbs.billing.BillingTaskServiceBase.calculateTaskReviseUseBuildingMeasureUnitFacilities(BillingTaskServiceBase.java:955)
	at jdk.internal.reflect.GeneratedMethodAccessor1329.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:283)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)
	at jdk.proxy2/jdk.proxy2.$Proxy234.calculateTaskReviseUseBuildingMeasureUnitFacilities(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor4160.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at ru.ubs.utils.ObjectUtils.invokeMethod(ObjectUtils.java:384)
	at ru.ubs.ssbs.exchange.TaskServiceImpl.evaluateCurrentContextMethod(TaskServiceImpl.java:816)
	at ru.ubs.ssbs.exchange.TaskServiceImpl.executeBySingleThreadContext(TaskServiceImpl.java:851)
	at ru.ubs.ssbs.exchange.TaskServiceImpl.lambda$executeByThreadContext$36(TaskServiceImpl.java:740)
	at ru.ubs.ssbs.utils.TransactionUtils.inTransaction(TransactionUtils.java:23)
	at ru.ubs.ssbs.exchange.TaskServiceImpl.lambda$executeByThreadContext$39(TaskServiceImpl.java:738)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:833)
