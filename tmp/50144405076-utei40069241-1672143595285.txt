=====================================================================
27.12.2022 15:19:55
Task #40053259
Task contextru.ubs.ssbs.exchange.PublishContractBillingTaskServiceContext@589df791[
springServiceName=publishContractBillingTaskService,
springServiceMethodName=transformExchangeParameters,
taskManager=ru.ubs.ssbs.exchange.reports.PublishContractBillingTaskService$PublishContractBillingTaskServiceTaskManager,
threadCount=1,
taskState=WORK,
message=Публикация расчётов,
exchangeFormatId=9809049,
userTaskId=40053259,
rangeCount=25,
rangeStart=0,
organisationDatasourceSchema=ssbs-40211,
inputParameters=ru.ubs.ssbs.billing.ContractBillingTaskCriteria@1a8976d7,
goodCount=772,
skipCount=0,
failedCount=2]
=====================================================================
<<Не закрыт предыдущий платежный период по контракту 50144405076, сейчас закрывался период 01.12.2022, 01.01.2023>>

java.lang.Exception: <<Не закрыт предыдущий платежный период по контракту 50144405076, сейчас закрывался период 01.12.2022, 01.01.2023>>
	at ru.ubs.ssbs.utils.ExceptionUtils.throwException(ExceptionUtils.java:18)
	at ru.ubs.ssbs.account.AccountContractHelper.validateAccountContract(AccountContractHelper.java:2162)
	at ru.ubs.ssbs.exchange.reports.PublishContractBillingTaskService$3.onObject(PublishContractBillingTaskService.java:322)
	at ru.ubs.ssbs.exchange.reports.PublishContractBillingTaskService$3.onObject(PublishContractBillingTaskService.java:289)
	at ru.ubs.ssbs.exchange.TaskThreadReader.read(TaskThreadReader.java:31)
	at ru.ubs.ssbs.exchange.reports.PublishContractBillingTaskService.publishContractBillingTask(PublishContractBillingTaskService.java:340)
	at ru.ubs.ssbs.exchange.reports.PublishContractBillingTaskService$$FastClassBySpringCGLIB$$b5bd5d46.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:737)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:283)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:672)
	at ru.ubs.ssbs.exchange.reports.PublishContractBillingTaskService$$EnhancerBySpringCGLIB$$bace4764.publishContractBillingTask(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor2337.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at ru.ubs.utils.ObjectUtils.invokeMethod(ObjectUtils.java:384)
	at ru.ubs.ssbs.exchange.TaskService.evaluateCurrentContextMethod(TaskService.java:839)
	at ru.ubs.ssbs.exchange.TaskService.executeBySingleThreadContext(TaskService.java:874)
	at ru.ubs.ssbs.exchange.TaskService.lambda$executeByThreadContext$36(TaskService.java:763)
	at ru.ubs.ssbs.utils.TransactionUtils.inTransaction(TransactionUtils.java:23)
	at ru.ubs.ssbs.exchange.TaskService.lambda$executeByThreadContext$39(TaskService.java:761)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:833)
